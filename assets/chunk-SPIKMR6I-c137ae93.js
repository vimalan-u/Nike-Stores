import{d as i,ak as v}from"./index-e32fbf2a.js";function b(s){const{loading:o,src:e,srcSet:l,onLoad:t,onError:u,crossOrigin:d,sizes:c,ignoreFallback:f}=s,[g,m]=i.useState("pending");i.useEffect(()=>{m(e?"loading":"pending")},[e]);const n=i.useRef(),p=i.useCallback(()=>{if(!e)return;a();const r=new Image;r.src=e,d&&(r.crossOrigin=d),l&&(r.srcset=l),c&&(r.sizes=c),o&&(r.loading=o),r.onload=E=>{a(),m("loaded"),t==null||t(E)},r.onerror=E=>{a(),m("failed"),u==null||u(E)},n.current=r},[e,d,l,c,t,u,o]),a=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return v(()=>{if(!f)return g==="loading"&&p(),()=>{a()}},[g,p,f]),f?"loaded":g}var h=(s,o)=>s!=="loaded"&&o==="beforeLoadOrError"||s==="failed"&&o==="onError";export{h as s,b as u};
